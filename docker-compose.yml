services:
  network-monitor:
    build: .
    image: network-monitor:latest
    container_name: network-monitor
    restart: unless-stopped
    ports:
      - "8080:8080" # nginx reverse proxy
      - "8081:8081" # WebSocket server
    volumes:
      - ./logs:/app/logs
    network_mode: bridge
    privileged: true # Required for ping
    cap_add:
      - NET_RAW
      - NET_ADMIN
    # Resource limits (Docker Compose standalone syntax)
    mem_limit: 192m # Maximum 192MB RAM (leaving ~320MB for Pi-hole + system)
    mem_reservation: 96m # Soft limit / preferred usage
    cpus: 0.4 # Maximum 40% of one CPU core (leaving 60% for Pi-hole + system)
